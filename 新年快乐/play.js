window.onload = function(){
//     str = "                                                                                                                                                                                                                                                                                                    
//                `!$@##;                                                             !##@|'                                                      '@#@$$$%;               .%######|.                                                                                                                    
//                :@####$`                           .;$###&'                        :@######$`                                                   `$#####!                 |#####|                                                                    .:%@##;                                          
//                 !#####;              ..`:;!%&############@:                      '&#####$.                                                     .%####|                  !#####;                                                      .':!%$@#############@:                                          
//     |#@&$%|!!;;;|@####&!;!|%$&@#|   !######################$`                   '&#####!                                                       .%####!                  !####@:                                 !##########################################;                                         
//     |###########################|   ;#######@$%|;'`                            '&#####@$$$$$$$$$$$$$$$$$$$$$$&&&&@@@#######!                    |####!                  !####&'                                 !#########################################@#|                  :@####@!              
//     |###########################|   :####$`                                   :@###########################################!                    |####!         !@$$%|!!!$####@|;;;!!!||%%$&@|                   |#####@$%|!;::'`.                                            `$########&'            
//            .'.         ..           :@###$`                                  !#############################################!                    |####!     `   |############################;                  .%####&'             !&%!::'.                                 ;##########|            
//        `$####%.       `$###$:       '&###$`                                .%#####$.             :#####!                               :####$`  |####!`%####%. |############################;                  `$####$.             :@#####@:                                !##########%.           
//         `$####%.     .%#####!       '&###$`                               :@#####|               :#####!                               :####$`  |####! :@####|          !####%        .%###@:                  '&####|              '&####@:                                 :##########!            
//          '&####%.    |####|         '&###$`                             `$######;                :#####!                               :####%.  |####!  ;#####!         !####|        .%###&'                  :@####!              `$####@:                                 .%########$`            
//           !&;.      |###$`          '&###$`                            |######$`                 :#####!                               ;####|   |####!   !#####;        !####|        `$###&'                  !#####:              .$####@:                                  :@#######!             
//  `$#############################@:  '&######################!         .;&####;                   :#####!                               !####!   |####!   .%####&'       |####!        `$###$`                 .%####&'              .%####@:                                   |######$`             
//  `$#############################@:  :@######################!              .  .%########################################;              %####;   |####!    '|'           |####!        `$###$.                 ;#####$`              .%####@:        ..``'::;!%$$:              '&#####;              
//   :!::'.       `$###@'      `':;!`  :####&:....:&####%':;|$@!                  |########################################;             '&###@:   |####!                 .%####;        '&###%.               .%##################################################;               !####%.              
//                `$###@'              ;####$`    `$####!                         |####$`           ;#####!       ..`':::;;`             !####&'   |####!                 `$####:        '&###|                 '&#################################################;               '&###;               
//                `$###@'              !####$`    `$####!                         |####$`           :#####!                             `$####$`   |####!      :####@&&&$$&#####&$$$$$$$$&#####@@####!           ;###@%!:`.            .%####@:                .`':.               .%##&'               
//    |#@&$%%|!;;;|@####%!!!|%$$&##;   |####%.    `$####!                         |####$`           :#####!                              .`:;!:    |####!      :#####################################!                                 .%####@:                                     !##%.               
//    |############################;  .%####|     `$####!                         |####$`           :#####!                                        |####!      :########@@##########@@@@@@@@@@#######!                                 .%####@:                                     :@#!                
//    |############################;  '&####!     `$####!                         |####$`           :#####!                                        |####!                .%####||##!                                      |#$`         .%####@:      '&#|.                          `&#;                
//                `$###@'             :@###@:     `$####!                         |####$`           :#####!                                        |####!                ;####$`;###;                                    %######%`     .%####@:    '&#####$`                                            
//        '&##@!` `$###@'  :@&'       !####&`     `$####!             `$##########################################################!                |####!               `$####! .%###;                                 `$######@;      .%####@:     '&######&'                                          
//       `$####$` `$###@:!#####|     `$####|      `$####!             `$##########################################################!                |####!              .$####$.  :@###!                               ;######@:        .%####@:       '&######@:                                        
//      '&####;   `$###@' .$####@:   ;#####;      `$####!             `$##@&$$$%%%%%|||!!!!!;;;;;;;;%#####$!;!!!!!!!||%%%%$$$$&@##!                |####!             `$####&'    !####%.                           `$######|          .%####@:         :@#######;                !######%.             
//     !####$`    `$###@'   !#####%.`$####%.      `$####!                                           :#####!                                        |####!            :@####@:      |#####;                        .%######&'           .%####@:           ;########!            '&#########:            
//   `$####|      `$###@'    ;###@:.|#####:       `$####!                                           :#####!                                        |####!          .%#####&'        |######%.                    |######@;             .%####@:             |########!          !##########%.           
// .%#####!       `&###@'     :;   |#####|        `$####!                                           :#####!                                       .%####!        .%######%.          ;########&:              .%#######!               .%####@:              '&#####@:          ;##########!            
//   `|##;       .%####@'         |#####$`        '&####!                                           ;#####!                                       .%####|      :@######@:             .%###########$:       '&#######|.                |#####@:                |##$`             ;########!             
//           |#########$`       '&#####$`         '&####!                                           !#####|                                       `$####%   :&#######@:                 `$#########&'          .%##$.           '&###########@'                                     '!!:.               
//           .%#######&'      .%######$`          :@####|                                           !#####%                                       '@####%.`%#######&'                      !######%.                             .%##########%.                                                         
//            ;#@%;.              `$#%.           ;#####%.                                          |#####%.                                      ;#####$`   :@#@;                           .|##|                                '&######&!.                                                           ";
    var oBox = document.getElementById('play');
    var oCanvas = document.getElementById('bubble');
    var oCountBox = document.getElementById('count_box');
    var oHistoryBox = document.getElementById('histroy');
    var oH1 = document.getElementsByTagName('h1')[0];
    var oH3 = document.getElementsByTagName('h3')[0];

    oBox.onmousedown = function(){
        countDown();
        boxDisplay();
        // oCanvas.style.background = '#f1f2f4';
    };
    // 倒计时
    countDown = function(){
        oCountBox.scrollTop = 100; 
        t = setInterval(scrolling, 40);
        function scrolling(){ 
            if(oCountBox.scrollTop%300!=0)
            { 
                oCountBox.scrollTop += 77; 
            }
            else
            { 
                clearInterval(t); 
            } 
        };
        setTimeout(canvaschangecolor, 5000);
    };

    // play框消失
    boxDisplay = function(){
        startMove(oBox, 'opacity', 0);
    };

    // 改变背景颜色
    canvaschangecolor = function(){
        oCanvas.style.background = '#f1f2f4';
        oCountBox.style.display = 'none';
        setTimeout(summaryNear, 500);
    };

    // 显示年总结
    summaryNear = function(){
        oHistoryBox.style.zIndex = '120';
        startMove(oH1, 'left', 280);
        startMove(oH3, 'right', 280);
        setTimeout(summaryDisplay, 1000);
    };

    summaryDisplay = function(){
        startMove(oH1, 'opacity', 0);
        startMove(oH3, 'opacity', 0);
        setTimeout(typeWrite, 1500);
    };

    // 打字机效果
    typeWrite = function(){
        var msg = "秋天的落叶已飘远，冬日的暖阳已降临，春天的故事在萌芽，夏日的清凉在期待。新年的钟声提前为你敲响，HAPPY NEW YEAR！";
        
        function getMsg(){
            return msg;
        };
        typeWriter.msg = getMsg(msg);
        typeWriter.type();
    };
    var typeWriter = {
        msg: function(msg){
            return msg;
        },
        len: function(){
            return this.msg.length;
        },
        seq: 0,
        speed: 50,     //打字时间(ms)
        type: function(){
            var _this = this;
            document.getElementById("typewriter").innerHTML = _this.msg.substring(0, _this.seq) + "_";
            if (_this.seq == _this.len()) {
                _this.seq = 0;
                clearTimeout(t);
            }
            else {
                _this.seq++;
                var t = setTimeout(function(){_this.type()}, this.speed);
            }
        }
    };


};